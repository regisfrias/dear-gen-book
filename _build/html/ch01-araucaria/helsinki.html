

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Helsinki &mdash; Dear Gen  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Universo" href="../ch02-universo/index.html" />
    <link rel="prev" title="Stockholm" href="stockholm.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Dear Gen
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/about-the-book.html">About the book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/about-the-authors.html">About the authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/how-the-book-is-organized.html">How the book is organized</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/source-code.html">Source code</a></li>
</ul>
<p class="caption"><span class="caption-text">Compositions</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Araucária</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="stockholm.html">Stockholm</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Helsinki</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creative-process">Creative process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step">Step-by-step</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch02-universo/index.html">Universo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch03-palha/index.html">Palha</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch04-infinitesimal/index.html">Infinitesimal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch05-alphabet/index.html">Alphabet</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dear Gen</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Araucária</a> &raquo;</li>
        
      <li>Helsinki</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="helsinki">
<h1>Helsinki<a class="headerlink" href="#helsinki" title="Permalink to this headline">¶</a></h1>
<div class="figure" id="id4">
<img alt="Final drawing" src="../_images/01-2018-5-14-20-14-39.png" />
<p class="caption"><span class="caption-text">Final drawing</span></p>
</div>
<div class="section" id="creative-process">
<h2>Creative process<a class="headerlink" href="#creative-process" title="Permalink to this headline">¶</a></h2>
<p>I didn’t strictly adhere to the theme of the week, in the sense that any
base image would work pretty much the same as an Araucária image.
Instead, I followed the code wherever it took me.</p>
<p>I started searching for images of araucária trees, which I find
beautiful. Then I tried to capture their logic with some algorithm. The
first draft is that attempt and can be seen in previous versions of the
code. <a class="reference internal" href="#frias-commit-2018" id="id1">[Fri]</a></p>
<p>I ended up with a fractal structure that resembles some leaf patterns
(not necessarily araucárias only). Then I decided to use the colors from
an actual araucária tree picture. Initially I chose the color based on
the position of the ellipse on screen, but I thought that was boring.
Then I thought of ordering the colors by hue or brightness and only then
use them. The idea was to give some directionality and sense of logic to
it.</p>
<p>What I realized during this process was that the reordered pixel array
looked very interesting by itself. So I decided to use that instead of
the image and trashed the fractal altogether.</p>
<p>The pixel array looks like this:</p>
<div class="figure" id="id5">
<img alt="Pixel array reordered by hue" src="../_images/01-hue.png" />
<p class="caption"><span class="caption-text">Pixel array reordered by hue</span></p>
</div>
<p>I took advantage of the fact that the hue is a bit misleading and
doesn’t seem to be totally ordered. That is just an optical illusion,
the above image varies from reds to blues, greens are (obviously) in the
middle. Try with a color picker!</p>
<p>For reference, here is the same image reordered by saturation:</p>
<div class="figure" id="id6">
<img alt="Saturation" src="../_images/01-saturation.png" />
<p class="caption"><span class="caption-text">Saturation</span></p>
</div>
<p>It is more obviously ordered.</p>
<p>And then by brightness:</p>
<div class="figure" id="id7">
<img alt="Brightness" src="../_images/01-brightness.png" />
<p class="caption"><span class="caption-text">Brightness</span></p>
</div>
<p>Now it’s clearly ordered!</p>
</div>
<div class="section" id="step-by-step">
<h2>Step-by-step<a class="headerlink" href="#step-by-step" title="Permalink to this headline">¶</a></h2>
<p>Let’s now go through the code to see how it works. The first few lines
create global variables for the sorted color array, the image that will
be loaded and the scale of the output image — i.e., how many times the
output image will be bigger than the input.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">[]</span> <span class="n">sortedColors</span><span class="p">;</span>
<span class="n">PImage</span> <span class="n">img</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">imgScale</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
<p>Since we’re not looking for resolution, but for an array of pixels that
looks visually interesting, it’s a good idea to keep the input image
small. The output image can be arbitrarily large — the point is to see
the pixels, not hide them.</p>
<p>Next, we load the image from the data folder (Processing default) then
use the method <code class="docutils literal notranslate"><span class="pre">loadPixels()</span></code> from the image object. This makes the
pixel data available to us as an array.</p>
<p>Finally, we size the applet window to match the input size times the
scale, that is the size of the output image. This needs to be the case
because we are grabbing the applet view to render the image and thus
avoiding creating image buffers.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">settings</span><span class="p">(){</span>
  <span class="n">String</span> <span class="n">imgName</span> <span class="o">=</span> <span class="s2">&quot;img-placeholder.jpg&quot;</span><span class="p">;</span>
  <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="p">(</span><span class="n">imgName</span><span class="p">);</span>
  <span class="n">img</span><span class="o">.</span><span class="n">loadPixels</span><span class="p">();</span>
  <span class="n">size</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">imgScale</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">imgScale</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On the setup function we call <code class="docutils literal notranslate"><span class="pre">noLoop()</span></code> because we’re really just
interested in one frame and we’re not doing animation. Then we call
<code class="docutils literal notranslate"><span class="pre">noStroke()</span></code> because we want filled ellipses without a stroke.</p>
<p>Then we populate the <code class="docutils literal notranslate"><span class="pre">sortedColors</span></code> array with the pixels from the
image retrieved by <code class="docutils literal notranslate"><span class="pre">loadPixels()</span></code> and call the sorting algorithm on
it.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">setup</span><span class="p">(){</span>
  <span class="n">noLoop</span><span class="p">();</span>
  <span class="n">noStroke</span><span class="p">();</span>

  <span class="n">sortedColors</span> <span class="o">=</span> <span class="n">new</span> <span class="nb">int</span><span class="p">[</span><span class="n">img</span><span class="o">.</span><span class="n">pixels</span><span class="o">.</span><span class="n">length</span><span class="p">];</span>
  <span class="n">sortedColors</span> <span class="o">=</span> <span class="n">bubbleSort</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">pixels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The sorting algorithm was shamelessly ripped off from Adamchik <a class="reference internal" href="#adamchik-sorting-2009" id="id2">[Ada]</a> and
is simingly simple:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">[]</span> <span class="n">bubbleSort</span><span class="p">(</span><span class="nb">int</span> <span class="n">ar</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="n">ar</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">){</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">hue</span><span class="p">(</span><span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">hue</span><span class="p">(</span><span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="p">])){</span>
        <span class="nb">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="n">ar</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">ar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Adamchik <a class="reference internal" href="#adamchik-sorting-2009" id="id3">[Ada]</a> explains it so:</p>
<blockquote>
<div>The algorithm works by selecting the smallest unsorted item and then
swapping it with the item in the next position to be filled. The
selection sort works as follows: you look through the entire array
for the smallest element, once you find it you swap it (the smallest
element) with the first element of the array. Then you look for the
smallest element in the remaining array (an array without the first
element) and swap it with the second element. Then you look for the
smallest element in the remaining array (an array without first and
second elements) and swap it with the third element, and so on.</div></blockquote>
<p>Line 4 (<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(hue(ar[j-1])</span> <span class="pre">&gt;</span> <span class="pre">hue(ar[j])){</span></code>) — my only modification to
the algorithm — first gets the hue value of the pixel before comparing
it with the previously found value. Change that to <code class="docutils literal notranslate"><span class="pre">saturation(...)</span></code>
or <code class="docutils literal notranslate"><span class="pre">brightness(...)</span></code> to create the previous two images.</p>
<p>This function returns an array, which we will use to create our final
image. That is done in <code class="docutils literal notranslate"><span class="pre">draw()</span></code>.</p>
<p>First, we need to change the default color mode to HSB (Hue, Saturation,
Brightness).</p>
<p>Then we loop through the <code class="docutils literal notranslate"><span class="pre">sortedColors</span></code> array. For each pixel we get
the brightness, which we’ll use as a parameter for the ellipse color
(<code class="docutils literal notranslate"><span class="pre">fill()</span></code>) and sizes.</p>
<p><em>Note that image arrays in Processing are one-dimensional.</em> This means
that the pixels of an image are placed side-by-side in a single line.
That’s why we need to do <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">%</span> <span class="pre">img.width</span></code> for x positions and
<code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">/</span> <span class="pre">img.width</span></code> for y positions. We then multiply the positions with
<code class="docutils literal notranslate"><span class="pre">imgScale</span></code> to stretch their locations to match the intended output
size.</p>
<p>Brightness varies from 0 to 100 (as defined in <code class="docutils literal notranslate"><span class="pre">colorMode()</span></code>), so we
need to make this range fall within a useful one for the ellipse size.
That is why we use <code class="docutils literal notranslate"><span class="pre">map()</span></code> and reset the range to
<code class="docutils literal notranslate"><span class="pre">imgScale/7</span></code>–<code class="docutils literal notranslate"><span class="pre">imgScale*5</span></code>. Using the <code class="docutils literal notranslate"><span class="pre">imgScale</span></code> should keep the
proportion for different output sizes.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">draw</span><span class="p">(){</span>
  <span class="n">colorMode</span><span class="p">(</span><span class="n">HSB</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>

  <span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">sortedColors</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="nb">float</span> <span class="n">brightness</span> <span class="o">=</span> <span class="n">brightness</span><span class="p">(</span><span class="n">sortedColors</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">fill</span><span class="p">(</span><span class="n">sortedColors</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="nb">float</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">img</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="o">*</span> <span class="n">imgScale</span><span class="p">;</span>
    <span class="nb">float</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">img</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="o">*</span> <span class="n">imgScale</span><span class="p">;</span>
    <span class="nb">float</span> <span class="n">ellipseSize</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">brightness</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">imgScale</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">imgScale</span><span class="o">*</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ellipseSize</span><span class="p">,</span> <span class="n">ellipseSize</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Finally, we save the frame inside a folder called “saved-png” with the
time stamp appended to the name. That is just to allow us to create
several trial images without worrying about overwriting them. We can
then exit the program, since we’re not displaying anything.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">saveFrame</span><span class="p">(</span>
    <span class="s2">&quot;saved-png/&quot;</span> <span class="o">+</span>
    <span class="n">year</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span>
    <span class="n">month</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span>
    <span class="n">day</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span>
    <span class="n">hour</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span>
    <span class="n">minute</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span>
    <span class="n">second</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;-hue.png&quot;</span>
  <span class="p">);</span>
  <span class="n">exit</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-ch01-araucaria/helsinki-0"><table class="docutils citation" frame="void" id="adamchik-sorting-2009" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Ada]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> Victor&nbsp;S. Adamchik. Sorting. URL: <a class="reference external" href="https://www.cs.cmu.edu/~adamchik/15-121/lectures/Sorting%20Algorithms/sorting.html">https://www.cs.cmu.edu/~adamchik/15-121/lectures/Sorting%20Algorithms/sorting.html</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="frias-commit-2018" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Fri]</a></td><td>Régis Frias. Commit #6dfebaf357587c6513298256939ef758f90f8105. URL: <a class="reference external" href="https://github.com/regisfrias/dear-gen/commit/6dfebaf357587c6513298256939ef758f90f8105">https://github.com/regisfrias/dear-gen/commit/6dfebaf357587c6513298256939ef758f90f8105</a>.</td></tr>
</tbody>
</table>
</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ch02-universo/index.html" class="btn btn-neutral float-right" title="Universo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stockholm.html" class="btn btn-neutral" title="Stockholm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Half Scheidl, Regis Frias.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>