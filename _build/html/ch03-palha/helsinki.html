

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Helsinki &mdash; Dear Gen  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Infinitesimal" href="../ch04-infinitesimal/index.html" />
    <link rel="prev" title="Stockholm" href="stockholm.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Dear Gen
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/about-the-book.html">About the book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/about-the-authors.html">About the authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/how-the-book-is-organized.html">How the book is organized</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch00-introduction/source-code.html">Source code</a></li>
</ul>
<p class="caption"><span class="caption-text">Compositions</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ch01-araucaria/index.html">Araucária</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch02-universo/index.html">Universo</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Palha</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="stockholm.html">Stockholm</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Helsinki</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creative-process">Creative process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step">Step by step</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch04-infinitesimal/index.html">Infinitesimal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch05-alphabet/index.html">Alphabet</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dear Gen</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Palha</a> &raquo;</li>
        
      <li>Helsinki</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="helsinki">
<h1>Helsinki<a class="headerlink" href="#helsinki" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="" src="../_images/03-helsinki.png" />
</div>
<div class="section" id="creative-process">
<h2>Creative process<a class="headerlink" href="#creative-process" title="Permalink to this headline">¶</a></h2>
<p>Most of the products made out of straw in Brazil, to my knowledge, are
weaved. That was the first idea I tried to capture with this week’s
sketch.</p>
<div class="figure" id="id1">
<img alt="The basic woof" src="../_images/03-woof-no-bend.png" />
<p class="caption"><span class="caption-text">The basic woof</span></p>
</div>
<p>The effect is created by sine waves — seen from above — with different
phases placed side by side. This is a literal translation of what is
usually done by manual craftsmanship.</p>
<p>But usually this pattern just makes up the fabric for something else,
like a hat or a mat. So I had the idea of bending the material.</p>
<div class="figure">
<img alt="" src="../_images/03-woof.png" />
</div>
<p>What I realized during this process is that the bending seemed more
promising than the pattern, so I decided to follow that path instead.</p>
<p>I started from scratch with a simple grid. The idea was to bend these in
several different ways to create some kind of fabric effect.</p>
<div class="figure">
<img alt="" src="../_images/03-grid.png" />
</div>
<p>After a lot of work I ended up with something that I liked.</p>
<div class="figure">
<img alt="" src="../_images/03-first-version.png" />
</div>
<p>But there was a problem. When I started writing this explanation I
realised I had made a mistake in the code. The loops for rows and
columns were based on different ranges (<code class="docutils literal notranslate"><span class="pre">height</span></code> for <code class="docutils literal notranslate"><span class="pre">y</span></code> and
<code class="docutils literal notranslate"><span class="pre">period</span></code> for <code class="docutils literal notranslate"><span class="pre">x</span></code>), so the result was actually casual, rather than
what I had predicted.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">;</span> <span class="n">y</span> <span class="o">+=</span> <span class="n">rectWidth</span><span class="p">){</span>
  <span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">period</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">rectHeight</span><span class="p">){</span>
</pre></div>
</div>
<p>Usually this wouldn’t matter, since I would only care about the final
result. But because I had to explain it here I also had to understand in
detail.</p>
<p>Good enough, thought I, now I just need to go step by step again to
figure out the ‘correct’ way to do this and only then explain.</p>
<p>Spoiler alert: I never managed to get to this point again with the new
attempts. That is mostly because I ran out of time, but also because I
found something I liked even more: the image at the top of the chapter.</p>
</div>
<div class="section" id="step-by-step">
<h2>Step by step<a class="headerlink" href="#step-by-step" title="Permalink to this headline">¶</a></h2>
<p>Unlike the previous chapters, for this one I thought it would be more
fruitful to actually build the program from scratch here instead of
going through the code line by line. But as usual you can find the code
on <a class="reference external" href="https://github.com/regisfrias/dear-gen">Github</a>.</p>
<p>Here’s how we create the basic grid. We need to define sizes for our
rectangles and because we want them to be strips in the end, let’s keep
width and height separate. These are global variables.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">rectWidth</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">rectHeight</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">period</span> <span class="o">=</span> <span class="mi">360</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">variationY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">variationX</span><span class="p">;</span>
</pre></div>
</div>
<p>We also define a period to be able to control the frequency of the
bending and the amount of variation for each axis (more on this below).</p>
<p>Also we need separate <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> variables for each of the vertices
so that we can control them independently — otherwise we would just get
rectangles in the end.</p>
<p>And the function that creates the grid looks like this:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">drawRects</span><span class="p">(){</span>
  <span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">width</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">rectWidth</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
      <span class="nb">float</span> <span class="n">prevX</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">rectWidth</span><span class="p">;</span>
      <span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">;</span> <span class="n">y</span> <span class="o">+=</span> <span class="n">rectHeight</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
          <span class="nb">float</span> <span class="n">prevY</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">rectHeight</span><span class="p">;</span>

          <span class="nb">float</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">prevX</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x4</span> <span class="o">=</span> <span class="n">prevX</span><span class="p">;</span>

          <span class="nb">float</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">prevY</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">prevY</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
          <span class="nb">float</span> <span class="n">x4</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>

          <span class="n">beginShape</span><span class="p">();</span>
          <span class="n">vertex</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">);</span>
          <span class="n">vertex</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">);</span>
          <span class="n">vertex</span><span class="p">(</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">);</span>
          <span class="n">vertex</span><span class="p">(</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">);</span>
          <span class="n">endShape</span><span class="p">(</span><span class="n">CLOSE</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>What this function is doing is getting <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> from the <code class="docutils literal notranslate"><span class="pre">for</span></code>
loop and assigning it to some of the vertices. But we also need the
previous vertices to be able to move the current one together with the
previous.</p>
<p>Note that some of the vertices are the same for now (for instance <code class="docutils literal notranslate"><span class="pre">x1</span></code>
and <code class="docutils literal notranslate"><span class="pre">x4</span></code>), but we will change them later.</p>
<p>That is what <code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">prevX</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">-</span> <span class="pre">rectWidth;</span></code> and
<code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">prevY</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">-</span> <span class="pre">rectHeight;</span></code> are doing. The <code class="docutils literal notranslate"><span class="pre">if</span></code> statements just
prevent us from getting negative values for when: <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">-</span> <span class="pre">rectWidth</span></code>
would be equal to -rectWidth.</p>
<p>What we’re effectively doing is skipping the first set of vertices and
drawing the rectangles starting from the second to the first, then third
to second and so on.</p>
<p>Don’t forget to initialize the variation variables and give the output a
size in setup:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">setup</span><span class="p">(){</span>
  <span class="n">size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
  <span class="n">variationX</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
  <span class="n">variationY</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
  <span class="n">colorMode</span><span class="p">(</span><span class="n">HSB</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since we’re here, let’s also change the color mode to
hue/saturation/brightness so the color system is more intuitive.</p>
<p>Two things are happening to build the target image: the width of the
columns and height of the rows are both varying horizontally and
vertically. So first we want to squeeze or stretch them in only one
direction, to keep things simple.</p>
<p>Inside of the <code class="docutils literal notranslate"><span class="pre">x</span></code> loop we add the following:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">prevAngleX</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">prevX</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="p">);</span>
<span class="nb">float</span> <span class="n">angleX</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="p">);</span>
<span class="nb">float</span> <span class="n">prevBendX</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">prevAngleX</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">bendX</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">angleX</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationX</span><span class="p">;</span>
</pre></div>
</div>
<p>Because we are bending things in a cyclical manner, we use sine waves to
perform the task. This is why we use angles instead of absolute <code class="docutils literal notranslate"><span class="pre">x</span></code>
and <code class="docutils literal notranslate"><span class="pre">y</span></code> positions. Also, I’m using angles instead of radians because
it makes the code more intuitive. But Processing has a handy function to
convert them to radians, that the <code class="docutils literal notranslate"><span class="pre">sin()</span></code> function needs.</p>
<p>What <code class="docutils literal notranslate"><span class="pre">bendX</span></code> and <code class="docutils literal notranslate"><span class="pre">prevBendX</span></code> are doing is to go through <code class="docutils literal notranslate"><span class="pre">0</span></code> to
<code class="docutils literal notranslate"><span class="pre">360</span></code> and giving us sine values for each step times the amount of
variation we want (<code class="docutils literal notranslate"><span class="pre">variationX</span></code>). This means that the sine wave,
instead of varying between <code class="docutils literal notranslate"><span class="pre">-1</span></code> and <code class="docutils literal notranslate"><span class="pre">+1</span></code>, will vary between
<code class="docutils literal notranslate"><span class="pre">-variationX</span></code> and <code class="docutils literal notranslate"><span class="pre">+variationX</span></code>.</p>
<p>Next we just need to add the variations to each of the vertices. We need
to keep previous <code class="docutils literal notranslate"><span class="pre">x</span></code> positions from current ones to make sure the
vertices match at each row.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">prevX</span> <span class="o">+</span> <span class="n">prevBendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">bendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">bendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x4</span> <span class="o">=</span> <span class="n">prevX</span> <span class="o">+</span> <span class="n">prevBendX</span><span class="p">;</span>
</pre></div>
</div>
<p>If we now do the same for the <code class="docutils literal notranslate"><span class="pre">y</span></code> axis we will have the following:</p>
<div class="figure">
<img alt="" src="../_images/03-squeeze-stretch.png" />
</div>
<p>Just to spell out, we add the bending variables to the <code class="docutils literal notranslate"><span class="pre">y</span></code> loop:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">prevAngleY</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">prevY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="p">);</span>
<span class="nb">float</span> <span class="n">angleY</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">period</span><span class="p">);</span>
<span class="nb">float</span> <span class="n">prevBendY</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">prevAngleY</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">bendY</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">angleY</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationY</span><span class="p">;</span>
</pre></div>
</div>
<p>Then we add these values to the vertices:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">prevY</span> <span class="o">+</span> <span class="n">prevBendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">prevY</span> <span class="o">+</span> <span class="n">prevBendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y3</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">bendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y4</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">bendY</span><span class="p">;</span>
</pre></div>
</div>
<p>Here, every rectangle’s vertices are shifted — left or right for row and
up or down for column — based on a sine wave. Note that the rectangles
in the middle are smaller and those at the edges are bigger.</p>
<p>Applying the shift in the other direction — that is, up and down for row
and left and right for column — we get a flag.</p>
<div class="figure">
<img alt="" src="../_images/03-flag.png" />
</div>
<p>The vertices now look like this:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">prevX</span> <span class="o">+</span> <span class="n">prevBendX</span> <span class="o">+</span> <span class="n">prevBendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">bendX</span> <span class="o">+</span> <span class="n">prevBendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">bendX</span> <span class="o">+</span> <span class="n">bendY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">x4</span> <span class="o">=</span> <span class="n">prevX</span> <span class="o">+</span> <span class="n">prevBendX</span> <span class="o">+</span> <span class="n">bendY</span><span class="p">;</span>

<span class="nb">float</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">prevY</span> <span class="o">+</span> <span class="n">prevBendY</span> <span class="o">+</span> <span class="n">prevBendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">prevY</span> <span class="o">+</span> <span class="n">prevBendY</span> <span class="o">+</span> <span class="n">bendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y3</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">bendY</span> <span class="o">+</span> <span class="n">bendX</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">y4</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">bendY</span> <span class="o">+</span> <span class="n">prevBendX</span><span class="p">;</span>
</pre></div>
</div>
<p>So far this is very uninteresting. But I still had hopes I could get to
the point where I was before. So I decided to make the rectangles more
straw-like by stretching them.</p>
<div class="figure">
<img alt="" src="../_images/03-streched-rects.png" />
</div>
<p>Then I wanted to vary the variation to get a more interesting result. We
do that by changing the phase of the y angles according to the x angles.
Like so:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">prevBendY</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">prevAngleY</span> <span class="o">+</span> <span class="n">prevAngleX</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationY</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">bendY</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">angleY</span> <span class="o">+</span> <span class="n">angleX</span><span class="p">))</span> <span class="o">*</span> <span class="n">variationY</span><span class="p">;</span>
</pre></div>
</div>
<p>Here we broke the connection between previous and current points. To fix
this we would need four different bend variables. But here the effect
was actually to our benefit. The fact that the vertices don’t match
anymore makes them look more like organic material that was weaved by
hand. Well, sort of. I wasn’t aiming at imitation, but at an interesting
result derived from the theme. And this is how the current stage looked
like to me.</p>
<div class="figure">
<img alt="" src="../_images/03-vary-vary.png" />
</div>
<p>At this point it was not clear yet if I was going in the right
direction, but I decided to pursue the path anyway. So I did what I had
done before for the original image: Made one side of the rectangles
smaller to make them look a little like straw.</p>
<div class="figure">
<img alt="" src="../_images/03-smaller-side.png" />
</div>
<p>This is achieved by making one of the vertices smaller by a fraction of
the variation:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">bendX</span> <span class="o">+</span> <span class="n">bendY</span> <span class="o">-</span> <span class="n">variationY</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<p>Then need to modify the <code class="docutils literal notranslate"><span class="pre">for</span></code> loops to fill the whole area of the
screen and get rid of the annoying flag effect.</p>
<div class="figure">
<img alt="" src="../_images/03-full-bg.png" />
</div>
<p>So the loops will be:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">variationX</span> <span class="o">+</span> <span class="n">rectWidth</span><span class="p">);</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">width</span> <span class="o">+</span> <span class="n">variationX</span> <span class="o">+</span> <span class="n">rectWidth</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">rectWidth</span><span class="p">)</span>
</pre></div>
</div>
<p>And:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">variationY</span> <span class="o">+</span> <span class="n">rectHeight</span><span class="p">);</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">height</span> <span class="o">+</span> <span class="n">variationY</span> <span class="o">+</span> <span class="n">rectHeight</span><span class="p">;</span> <span class="n">y</span> <span class="o">+=</span> <span class="n">rectHeight</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">if</span></code> statements must also reflect this:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">variationX</span> <span class="o">-</span> <span class="n">rectWidth</span><span class="p">)</span>
</pre></div>
</div>
<p>And:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">variationY</span> <span class="o">-</span> <span class="n">rectHeight</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can add some colors that vary according to both row and column.
We do that with a sine wave. Here we don’t care so much about angles, we
just want the colors to vary a lot. So we can use any vertex as angle.</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span> <span class="n">h</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">y1</span><span class="o">*</span><span class="mi">20</span> <span class="o">+</span> <span class="n">x1</span><span class="p">))</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">40</span><span class="p">;</span>
<span class="n">fill</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span>
</pre></div>
</div>
<div class="figure">
<img alt="" src="../_images/03-colors.png" />
</div>
<p>The final touch is to make the background have a more interesting color. Or
rather a color gradient with the following code:</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">){</span>
  <span class="nb">float</span> <span class="n">h</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="n">stroke</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
  <span class="n">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here we’re just drawing one-pixel thick lines from the top of the screen
to the bottom. The hue will vary from <code class="docutils literal notranslate"><span class="pre">180</span></code> to <code class="docutils literal notranslate"><span class="pre">360</span></code> so we don’t get
the full rainbow spectrum.</p>
<div class="figure">
<img alt="../_images/03-background.png" src="../_images/03-background.png" />
</div>
<p>The final result is the image at the top. Plus a number of variations.</p>
<div class="figure">
<img alt="../_images/03-2018-5-30-20-27-18-palha.png" src="../_images/03-2018-5-30-20-27-18-palha.png" />
</div>
<div class="figure">
<img alt="../_images/03-2018-5-30-20-27-23-palha.png" src="../_images/03-2018-5-30-20-27-23-palha.png" />
</div>
<div class="figure">
<img alt="../_images/03-2018-5-30-20-27-30-palha.png" src="../_images/03-2018-5-30-20-27-30-palha.png" />
</div>
<div class="figure">
<img alt="../_images/03-2018-5-30-20-35-10-palha.png" src="../_images/03-2018-5-30-20-35-10-palha.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ch04-infinitesimal/index.html" class="btn btn-neutral float-right" title="Infinitesimal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stockholm.html" class="btn btn-neutral" title="Stockholm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Half Scheidl, Regis Frias.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>